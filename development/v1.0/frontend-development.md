# Titan | 素材协作平台 MVP 前端开发清单 v1.0

基于实际技术实现状态，专注于API集成和数据获取功能的完善。

## 📋 项目概览

- **项目代号**: Titan | 素材协作平台 MVP v1.0
- **技术栈**: Next.js + shadcn/ui + Tailwind CSS + TypeScript
- **核心功能**: 项目管理界面 + 阿里云盘文件浏览 + 素材协作
- **开发状态**: UI框架已完成，API集成和数据获取待实现

---

## 🎨 前端开发清单

### Phase 1: 页面结构完善 ✅

- [x] **核心页面创建**
  - [x] `app/[locale]/dashboard/page.tsx` - 项目看板
    - **文件路径**: `apps/nextjs-frontend/src/app/[locale]/dashboard/page.tsx`
    - **实现状态**: ✅ 已完成 - 仪表板UI框架
    - **技术实现**: shadcn/ui + Tailwind CSS
    - **验收标准**: 响应式布局，统计卡片，项目列表区域
  - [x] `app/[locale]/project/[id]/page.tsx` - 项目详情页
    - **文件路径**: `apps/nextjs-frontend/src/app/[locale]/project/[id]/page.tsx`
    - **实现状态**: ✅ 已完成 - 项目详情UI框架
    - **技术实现**: 项目信息展示，素材列表，活动日志
    - **验收标准**: 动态路由，面包屑导航，操作按钮
  - [x] `app/[locale]/settings/page.tsx` - 设置页面
    - **实现状态**: ✅ 基础框架 - 需要阿里云盘配置表单
  - [x] 路由配置和导航
    - **文件路径**: `apps/nextjs-frontend/src/app/[locale]/page.tsx`
    - **实现状态**: ✅ 已完成 - 自动重定向到dashboard
    - **验收标准**: 正确的页面跳转和导航体验

- [x] **布局组件完善**
  - [x] 更新 `layout.tsx` - 主要布局结构
    - **文件路径**: `apps/nextjs-frontend/src/components/layout/`
    - **实现状态**: ✅ 已完成 - Header + Main布局
    - **技术实现**: AuthenticatedLayout包装器
    - **验收标准**: 统一的页面布局和导航体验
  - [x] 面包屑导航组件
    - **文件路径**: `apps/nextjs-frontend/src/components/breadcrumb/`
    - **实现状态**: ✅ 已完成 - Breadcrumb组件
    - **验收标准**: 动态面包屑路径显示

### Phase 2: UI组件库集成 ✅

- [x] **shadcn/ui组件集成**
  - [x] 基础UI组件库设置
    - **实现状态**: ✅ 已完成 - shadcn/ui + Tailwind CSS配置
    - **包含组件**: Button, Card, Badge, Input等
    - **验收标准**: 一致的设计语言和组件样式
  - [x] 图标系统集成
    - **实现状态**: ✅ 已完成 - Lucide React图标库
    - **验收标准**: 丰富的图标支持，统一的视觉风格

- [x] **响应式设计实现**
  - [x] 移动端适配
    - **实现状态**: ✅ 已完成 - Tailwind响应式类
    - **验收标准**: 手机、平板、桌面端良好显示
  - [x] 暗色模式准备
    - **实现状态**: ✅ 基础支持 - CSS变量配置
    - **验收标准**: 主题切换基础设施就绪

### Phase 3: API集成和状态管理 ❌

- [ ] **API服务层开发**
  - [ ] **创建API客户端基础设施**
    - **优先级**: P0 - 阻塞所有数据功能
    - **工时估计**: 8小时
    - **文件路径**: `apps/nextjs-frontend/src/lib/api/`
    - **实现内容**:
      - HTTP客户端封装 (axios/fetch)
      - 请求拦截器 (JWT token注入)
      - 响应拦截器 (错误处理)
      - TypeScript类型安全
    - **验收标准**: 统一的API调用接口，自动token管理
    - **依赖**: JWT token存储机制
    - **风险**: 错误处理复杂度

  - [ ] **认证API服务**
    - **优先级**: P0
    - **工时估计**: 6小时
    - **文件路径**: `apps/nextjs-frontend/src/lib/api/auth.ts`
    - **API端点映射**:
      - `POST /auth/login` - 用户登录
      - `POST /auth/register` - 用户注册
      - `POST /auth/refresh` - Token刷新
      - `POST /auth/logout` - 用户登出
    - **验收标准**: 完整的认证流程，自动token管理
    - **依赖**: API客户端基础设施
    - **风险**: Token安全存储

  - [ ] **项目管理API服务**
    - **优先级**: P0
    - **工时估计**: 10小时
    - **文件路径**: `apps/nextjs-frontend/src/lib/api/projects.ts`
    - **API端点映射**:
      - `GET /projects` - 获取项目列表
      - `POST /projects` - 创建项目
      - `GET /projects/:id` - 获取项目详情
      - `PATCH /projects/:id` - 更新项目
      - `DELETE /projects/:id` - 删除项目
      - `GET /projects/:id/materials` - 获取项目素材
      - `POST /projects/:id/materials` - 添加素材
      - `DELETE /projects/:id/materials/:materialId` - 移除素材
    - **验收标准**: 完整的项目CRUD操作，素材管理
    - **依赖**: API客户端，共享类型定义
    - **风险**: 复杂的状态同步

  - [ ] **阿里云盘API服务**
    - **优先级**: P0
    - **工时估计**: 12小时
    - **文件路径**: `apps/nextjs-frontend/src/lib/api/aliyun-drive.ts`
    - **API端点映射**:
      - `GET /aliyun-drive/config` - 获取配置状态
      - `POST /aliyun-drive/config` - 创建WebDAV配置
      - `PUT /aliyun-drive/config/:id` - 更新配置
      - `GET /aliyun-drive/files` - 浏览文件列表
      - `POST /aliyun-drive/files/upload` - 上传文件
      - `GET /aliyun-drive/files/download` - 下载文件
      - `POST /aliyun-drive/directories` - 创建目录
      - `DELETE /aliyun-drive/items` - 删除文件/目录
    - **验收标准**: 完整的WebDAV文件操作，配置管理
    - **依赖**: API客户端，文件处理组件
    - **风险**: 大文件操作性能

- [ ] **状态管理集成**
  - [ ] **React Query数据获取**
    - **优先级**: P0
    - **工时估计**: 12小时
    - **文件路径**: `apps/nextjs-frontend/src/hooks/`
    - **实现内容**:
      - 项目相关hooks (`useProjects`, `useProject`)
      - 阿里云盘hooks (`useAliyunConfig`, `useFileList`)
      - 认证hooks (`useAuth`, `useUser`)
      - 缓存策略和数据同步
    - **验收标准**: 自动数据缓存，乐观更新，错误重试
    - **依赖**: API服务层，React Query配置
    - **风险**: 缓存策略复杂度

  - [ ] **全局状态管理Zustand**
    - **优先级**: P1
    - **工时估计**: 6小时
    - **文件路径**: `apps/nextjs-frontend/src/store/`
    - **状态模块**:
      - 用户认证状态 (已存在`user.store.ts`)
      - UI状态管理 (主题、侧边栏等)
      - 临时状态管理 (表单数据、选择状态)
    - **验收标准**: 响应式状态更新，持久化支持
    - **依赖**: Zustand配置
    - **风险**: 状态同步复杂性

### Phase 4: 核心功能组件开发 ❌

- [ ] **项目管理组件**
  - [ ] **项目列表组件优化**
    - **优先级**: P0
    - **工时估计**: 8小时
    - **文件路径**: `apps/nextjs-frontend/src/components/project/project-list.component.tsx`
    - **实现内容**:
      - 真实数据API集成
      - 项目创建表单
      - 搜索和过滤功能
      - 项目卡片交互
    - **验收标准**: 显示真实项目数据，支持CRUD操作
    - **依赖**: 项目API服务，React Query hooks
    - **风险**: 列表性能优化

  - [ ] **项目详情页面集成**
    - **优先级**: P0
    - **工时估计**: 10小时
    - **文件路径**: `apps/nextjs-frontend/src/app/[locale]/project/[id]/page.tsx`
    - **实现内容**:
      - 动态项目数据加载
      - 项目信息编辑表单
      - 素材列表真实数据
      - 操作按钮功能实现
    - **验收标准**: 完整的项目详情展示和编辑功能
    - **依赖**: 项目API服务，表单验证
    - **风险**: 数据加载状态管理

  - [ ] **项目表单组件**
    - **优先级**: P0
    - **工时估计**: 6小时
    - **文件路径**: `apps/nextjs-frontend/src/components/project/project-form.component.tsx`
    - **实现内容**:
      - React Hook Form + Zod验证
      - 项目创建/编辑表单
      - 颜色选择器集成
      - 表单提交和错误处理
    - **验收标准**: 完整的表单验证和提交流程
    - **依赖**: 表单库配置，API集成
    - **风险**: 复杂表单验证逻辑

- [ ] **阿里云盘集成组件**
  - [ ] **WebDAV配置组件**
    - **优先级**: P0
    - **工时估计**: 8小时
    - **文件路径**: `apps/nextjs-frontend/src/components/aliyun-drive/aliyun-drive-connector.component.tsx`
    - **实现内容**:
      - WebDAV配置表单 (URL、用户名、密码)
      - 连接状态检测和显示
      - 配置测试和验证
      - 错误处理和用户提示
    - **验收标准**: 用户可以配置和测试WebDAV连接
    - **依赖**: 阿里云盘API服务，表单验证
    - **风险**: WebDAV连接测试复杂度

  - [ ] **文件浏览器组件**
    - **优先级**: P0 - 阻塞核心功能
    - **工时估计**: 16小时
    - **文件路径**: `apps/nextjs-frontend/src/components/aliyun-drive/aliyun-drive-browser.component.tsx`
    - **实现内容**:
      - 模态框文件浏览器
      - 目录导航和面包屑
      - 文件/文件夹列表展示
      - 多选功能 (复选框)
      - 文件类型图标
      - 文件预览和详情
      - 文件操作 (上传、下载、删除)
    - **验收标准**: 完整的文件浏览和管理体验
    - **依赖**: 阿里云盘API服务，UI组件库
    - **风险**: 复杂的文件操作逻辑，性能优化

  - [ ] **素材添加流程**
    - **优先级**: P0
    - **工时估计**: 10小时
    - **实现内容**:
      - 从文件浏览器选择文件
      - 素材添加到项目流程
      - 批量添加支持
      - 添加进度和状态显示
    - **验收标准**: 用户可以将云盘文件添加到项目
    - **依赖**: 文件浏览器，项目API
    - **风险**: 批量操作性能

### Phase 5: 用户体验优化 ❌

- [ ] **加载状态和错误处理**
  - [ ] **全局加载状态管理**
    - **优先级**: P1
    - **工时估计**: 6小时
    - **实现内容**:
      - Skeleton加载组件
      - 全局loading indicator
      - 数据获取loading状态
      - 长时间操作进度显示
    - **验收标准**: 用户能清楚了解操作进度和状态
    - **依赖**: shadcn/ui组件，React Query
    - **风险**: 过度的加载动画影响体验

  - [ ] **错误边界和错误处理**
    - **优先级**: P1
    - **工时估计**: 8小时
    - **实现内容**:
      - React错误边界组件
      - API错误统一处理
      - 用户友好错误提示
      - 错误重试机制
    - **验收标准**: 优雅的错误处理和恢复机制
    - **依赖**: 错误处理库，通知组件
    - **风险**: 错误处理逻辑复杂度

  - [ ] **空状态设计**
    - **优先级**: P1
    - **工时估计**: 4小时
    - **实现内容**:
      - 项目列表空状态
      - 素材列表空状态
      - 文件浏览器空状态
      - 引导用户操作的空状态
    - **验收标准**: 清晰的空状态提示和操作引导
    - **依赖**: UI设计规范
    - **风险**: 设计一致性维护

- [ ] **交互优化**
  - [ ] **Toast消息系统**
    - **优先级**: P1
    - **工时估计**: 4小时
    - **实现内容**:
      - 成功/错误/警告消息提示
      - 操作确认提示
      - 自动消失和手动关闭
      - 消息队列管理
    - **验收标准**: 及时的操作反馈和状态通知
    - **依赖**: shadcn/ui Toast组件
    - **风险**: 消息过多影响体验

  - [ ] **确认对话框**
    - **优先级**: P1
    - **工时估计**: 3小时
    - **实现内容**:
      - 删除操作确认
      - 危险操作二次确认
      - 自定义确认对话框
    - **验收标准**: 防止误操作，提升操作安全性
    - **依赖**: shadcn/ui Dialog组件
    - **风险**: 过度确认影响效率

  - [ ] **键盘快捷键支持**
    - **优先级**: P2
    - **工时估计**: 6小时
    - **实现内容**:
      - 项目创建快捷键 (Ctrl+N)
      - 搜索快捷键 (Ctrl+K)
      - 导航快捷键
      - 快捷键提示
    - **验收标准**: 提升高级用户操作效率
    - **依赖**: 键盘事件处理
    - **风险**: 快捷键冲突

### Phase 6: 国际化和主题 ❌

- [ ] **国际化完善**
  - [ ] **多语言内容补全**
    - **优先级**: P2
    - **工时估计**: 8小时
    - **实现内容**:
      - 完善中文翻译
      - 添加英文翻译
      - 动态语言切换
      - 语言偏好持久化
    - **验收标准**: 完整的多语言支持
    - **依赖**: next-intl配置
    - **风险**: 翻译质量和一致性

- [ ] **主题系统**
  - [ ] **暗色模式实现**
    - **优先级**: P2
    - **工时估计**: 6小时
    - **实现内容**:
      - 完整的暗色主题
      - 主题切换动画
      - 主题偏好持久化
      - 系统主题跟随
    - **验收标准**: 完整的主题切换体验
    - **依赖**: CSS变量系统
    - **风险**: 主题一致性维护

---

## 📦 共享类型包集成

### Phase 1: 类型安全 ❌

- [ ] **TypeScript类型集成**
  - [ ] **后端类型导入**
    - **优先级**: P0 - 阻塞开发
    - **工时估计**: 4小时
    - **实现内容**:
      - 从`packages/shared-types`导入类型
      - API响应类型定义
      - 实体类型使用
      - DTO类型验证
    - **验收标准**: 前端TypeScript无类型错误
    - **依赖**: 共享类型包创建
    - **风险**: 类型定义滞后

- [ ] **API响应类型化**
  - [ ] **类型安全的API调用**
    - **优先级**: P0
    - **工时估计**: 6小时
    - **实现内容**:
      - 泛型API客户端
      - 类型化的API hook
      - 运行时类型验证
      - 类型错误处理
    - **验收标准**: 编译时类型检查，运行时类型安全
    - **依赖**: 共享类型包，API服务层
    - **风险**: 运行时验证性能

---

## 🎯 开发优先级

### 高优先级 (P0) - 阻塞核心功能

1. ❌ **API服务层开发** - 基础设施
2. ❌ **React Query集成** - 数据获取
3. ❌ **项目管理API集成** - 核心业务
4. ❌ **阿里云盘文件浏览器** - 核心功能
5. ❌ **共享类型包集成** - 类型安全

### 中优先级 (P1) - 用户体验

1. ❌ 加载状态和错误处理
2. ❌ Toast消息和确认对话框
3. ❌ 表单验证和用户反馈
4. ❌ 响应式设计优化

### 低优先级 (P2) - 增强功能

1. ❌ 键盘快捷键支持
2. ❌ 暗色模式实现
3. ❌ 国际化完善
4. ❌ 高级搜索和筛选

---

## 🚀 里程碑计划

### Milestone 1: 基础设施完成 ❌
**时间**: Week 4
**状态**: 进行中
**阻塞项**: API服务层，共享类型包
- 🔄 API客户端基础设施
- 🔄 React Query配置
- 🔄 共享类型包集成
- 🔄 基础认证流程

### Milestone 2: 项目管理功能 ❌
**时间**: Week 5  
**状态**: 待开始
**依赖**: Milestone 1完成
- ❌ 项目列表数据集成
- ❌ 项目详情页面完善
- ❌ 项目CRUD操作实现
- ❌ 基础错误处理

### Milestone 3: 文件管理功能 ❌
**时间**: Week 6
**状态**: 待开始
**依赖**: Milestone 2完成
- ❌ 阿里云盘配置界面
- ❌ 文件浏览器开发
- ❌ 素材添加流程
- ❌ 文件操作功能

### Milestone 4: 用户体验优化 ❌
**时间**: Week 7
**状态**: 待开始
**依赖**: Milestone 3完成
- ❌ 加载状态完善
- ❌ 错误处理优化
- ❌ 交互细节打磨
- ❌ 性能优化

---

## 📝 技术债务和风险评估

### 技术债务

1. **API集成缺失** - 所有页面都是静态UI，无法进行实际业务操作
2. **类型安全不足** - 缺少共享类型包，前后端类型不同步
3. **状态管理不完整** - React Query未配置，数据获取逻辑缺失
4. **错误处理缺失** - 没有统一的错误处理机制
5. **组件复用性低** - 缺少通用组件库和设计系统

### 风险评估

**高风险**:
- 文件浏览器组件复杂度高，可能影响性能
- WebDAV集成的错误处理和用户体验挑战
- 大文件列表的前端性能优化

**中风险**:
- API响应格式变更可能影响前端集成
- 状态管理复杂度随功能增加而提升
- 类型定义维护成本

**低风险**:
- UI组件库更新兼容性
- 国际化内容翻译质量
- 主题系统维护成本

### 应对策略

1. **分阶段开发**: 优先完成P0任务，确保核心功能可用
2. **组件化设计**: 建立可复用的组件库，提升开发效率
3. **性能监控**: 及时发现和解决性能瓶颈
4. **用户测试**: 早期用户反馈指导产品迭代

---

## 📊 质量标准

### 代码质量
- TypeScript严格模式，无类型错误
- XO (ESLint) 规则100%通过
- 组件测试覆盖率 > 70%
- 无严重级别的Accessibility问题

### 用户体验
- 页面加载时间 < 2s
- 操作响应时间 < 300ms
- 移动端适配良好
- 无明显的交互阻塞

### 性能标准
- Core Web Vitals良好评分
- 首屏内容渲染 < 1.5s
- 大文件列表渲染流畅
- 内存使用合理

---

## 🔗 依赖关系

### 外部依赖
- **后端API完成**: 所有前端功能依赖对应的后端API
- **共享类型包**: TypeScript类型安全依赖
- **设计规范**: UI组件和交互设计标准

### 内部依赖
- **API服务层** → 所有数据功能
- **React Query配置** → 数据缓存和同步
- **错误处理基础设施** → 用户体验保证
- **组件库** → 开发效率和一致性

---

_本清单基于Titan v1.0实际前端实现状态编写，使用shadcn/ui技术栈，重点关注API集成和数据功能的完善。_